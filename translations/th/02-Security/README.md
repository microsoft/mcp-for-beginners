# MCP Security: การปกป้องอย่างครอบคลุมสำหรับระบบ AI

[![MCP Security Best Practices](../../../translated_images/th/03.175aed6dedae133f9d41e49cefd0f0a9a39c3317e1eaa7ef7182696af7534308.png)](https://youtu.be/88No8pw706o)

_(คลิกที่ภาพด้านบนเพื่อดูวิดีโอของบทเรียนนี้)_

ความปลอดภัยเป็นพื้นฐานสำคัญของการออกแบบระบบ AI ซึ่งเป็นเหตุผลที่เราให้ความสำคัญในส่วนที่สองนี้ ซึ่งสอดคล้องกับหลักการ **Secure by Design** ของ Microsoft จาก [Secure Future Initiative](https://www.microsoft.com/security/blog/2025/04/17/microsofts-secure-by-design-journey-one-year-of-success/)

Model Context Protocol (MCP) นำความสามารถใหม่ที่ทรงพลังมาสู่แอปพลิเคชันที่ขับเคลื่อนด้วย AI ในขณะเดียวกันก็แนะนำความท้าทายด้านความปลอดภัยเฉพาะที่เกินกว่าความเสี่ยงซอฟต์แวร์แบบดั้งเดิม ระบบ MCP เผชิญกับความกังวลด้านความปลอดภัยที่มีอยู่แล้ว (การเขียนโค้ดอย่างปลอดภัย, สิทธิ์น้อยที่สุด, ความปลอดภัยของห่วงโซ่อุปทาน) และภัยคุกคามเฉพาะ AI ใหม่ ๆ รวมถึงการฉีดคำสั่ง (prompt injection), การวางยาพิษเครื่องมือ, การแฮ็กเซสชัน, การโจมตี confused deputy, ช่องโหว่ token passthrough และการแก้ไขความสามารถแบบไดนามิก

บทเรียนนี้จะสำรวจความเสี่ยงด้านความปลอดภัยที่สำคัญที่สุดในการใช้งาน MCP — ครอบคลุมการพิสูจน์ตัวตน, การอนุญาต, สิทธิ์ที่เกินจำเป็น, การฉีดคำสั่งแบบอ้อม, ความปลอดภัยของเซสชัน, ปัญหา confused deputy, การจัดการโทเค็น และช่องโหว่ห่วงโซ่อุปทาน คุณจะได้เรียนรู้การควบคุมและแนวทางปฏิบัติที่สามารถนำไปใช้ได้จริงเพื่อบรรเทาความเสี่ยงเหล่านี้ พร้อมทั้งใช้ประโยชน์จากโซลูชันของ Microsoft เช่น Prompt Shields, Azure Content Safety และ GitHub Advanced Security เพื่อเสริมความแข็งแกร่งให้กับการปรับใช้ MCP ของคุณ

## วัตถุประสงค์การเรียนรู้

เมื่อจบบทเรียนนี้ คุณจะสามารถ:

- **ระบุภัยคุกคามเฉพาะ MCP**: รับรู้ความเสี่ยงด้านความปลอดภัยเฉพาะในระบบ MCP รวมถึงการฉีดคำสั่ง, การวางยาพิษเครื่องมือ, สิทธิ์ที่เกินจำเป็น, การแฮ็กเซสชัน, ปัญหา confused deputy, ช่องโหว่ token passthrough และความเสี่ยงห่วงโซ่อุปทาน
- **ใช้การควบคุมความปลอดภัย**: นำมาตรการบรรเทาที่มีประสิทธิภาพมาใช้ รวมถึงการพิสูจน์ตัวตนที่เข้มงวด, การเข้าถึงแบบสิทธิ์น้อยที่สุด, การจัดการโทเค็นอย่างปลอดภัย, การควบคุมความปลอดภัยของเซสชัน และการตรวจสอบห่วงโซ่อุปทาน
- **ใช้โซลูชันความปลอดภัยของ Microsoft**: เข้าใจและปรับใช้ Microsoft Prompt Shields, Azure Content Safety และ GitHub Advanced Security เพื่อปกป้องงาน MCP
- **ตรวจสอบความปลอดภัยของเครื่องมือ**: รับรู้ความสำคัญของการตรวจสอบข้อมูลเมตาของเครื่องมือ, การติดตามการเปลี่ยนแปลงแบบไดนามิก และการป้องกันการโจมตีฉีดคำสั่งแบบอ้อม
- **ผสานแนวทางปฏิบัติที่ดีที่สุด**: รวมพื้นฐานความปลอดภัยที่มีอยู่ (การเขียนโค้ดอย่างปลอดภัย, การเสริมความแข็งแกร่งของเซิร์ฟเวอร์, zero trust) กับการควบคุมเฉพาะ MCP เพื่อการปกป้องอย่างครอบคลุม

# สถาปัตยกรรมและการควบคุมความปลอดภัย MCP

การใช้งาน MCP สมัยใหม่ต้องการแนวทางความปลอดภัยแบบหลายชั้นที่ครอบคลุมทั้งความปลอดภัยซอฟต์แวร์แบบดั้งเดิมและภัยคุกคามเฉพาะ AI ข้อกำหนด MCP ที่พัฒนาอย่างรวดเร็วยังคงปรับปรุงการควบคุมความปลอดภัยเพื่อให้สามารถผสานรวมกับสถาปัตยกรรมความปลอดภัยองค์กรและแนวทางปฏิบัติที่ดีที่สุดที่มีอยู่ได้ดีขึ้น

งานวิจัยจาก [Microsoft Digital Defense Report](https://aka.ms/mddr) แสดงให้เห็นว่า **98% ของการละเมิดที่รายงานสามารถป้องกันได้ด้วยสุขอนามัยความปลอดภัยที่เข้มงวด** กลยุทธ์การป้องกันที่มีประสิทธิภาพที่สุดคือการผสมผสานแนวทางปฏิบัติความปลอดภัยพื้นฐานกับการควบคุมเฉพาะ MCP — มาตรการความปลอดภัยพื้นฐานที่พิสูจน์แล้วว่ายังคงมีผลกระทบมากที่สุดในการลดความเสี่ยงด้านความปลอดภัยโดยรวม

## ภาพรวมความปลอดภัยปัจจุบัน

> **หมายเหตุ:** ข้อมูลนี้สะท้อนมาตรฐานความปลอดภัย MCP ณ วันที่ **18 ธันวาคม 2025** โปรโตคอล MCP ยังคงพัฒนาอย่างรวดเร็ว และการใช้งานในอนาคตอาจแนะนำรูปแบบการพิสูจน์ตัวตนและการควบคุมที่เพิ่มขึ้น โปรดอ้างอิง [MCP Specification](https://spec.modelcontextprotocol.io/), [MCP GitHub repository](https://github.com/modelcontextprotocol) และ [เอกสารแนวทางปฏิบัติความปลอดภัย](https://modelcontextprotocol.io/specification/2025-11-25/basic/security_best_practices) สำหรับคำแนะนำล่าสุดเสมอ

### การพัฒนาการพิสูจน์ตัวตน MCP

ข้อกำหนด MCP ได้พัฒนาอย่างมากในแนวทางการพิสูจน์ตัวตนและการอนุญาต:

- **แนวทางเดิม**: ข้อกำหนดในช่วงแรกต้องการให้นักพัฒนาสร้างเซิร์ฟเวอร์พิสูจน์ตัวตนแบบกำหนดเอง โดยเซิร์ฟเวอร์ MCP ทำหน้าที่เป็น OAuth 2.0 Authorization Server ที่จัดการการพิสูจน์ตัวตนผู้ใช้โดยตรง
- **มาตรฐานปัจจุบัน (2025-11-25)**: ข้อกำหนดที่อัปเดตอนุญาตให้เซิร์ฟเวอร์ MCP มอบหมายการพิสูจน์ตัวตนให้กับผู้ให้บริการตัวตนภายนอก (เช่น Microsoft Entra ID) เพื่อปรับปรุงท่าทางความปลอดภัยและลดความซับซ้อนในการใช้งาน
- **ความปลอดภัยชั้นการขนส่ง**: รองรับกลไกการขนส่งที่ปลอดภัยพร้อมรูปแบบการพิสูจน์ตัวตนที่เหมาะสมทั้งการเชื่อมต่อในเครื่อง (STDIO) และระยะไกล (Streamable HTTP)

## ความปลอดภัยการพิสูจน์ตัวตนและการอนุญาต

### ความท้าทายด้านความปลอดภัยปัจจุบัน

การใช้งาน MCP สมัยใหม่เผชิญกับความท้าทายหลายประการด้านการพิสูจน์ตัวตนและการอนุญาต:

### ความเสี่ยงและช่องทางโจมตี

- **ตรรกะการอนุญาตที่กำหนดค่าไม่ถูกต้อง**: การใช้งานการอนุญาตที่ผิดพลาดในเซิร์ฟเวอร์ MCP อาจเปิดเผยข้อมูลที่ละเอียดอ่อนและใช้การควบคุมการเข้าถึงผิดพลาด
- **การโจรกรรมโทเค็น OAuth**: การขโมยโทเค็นของเซิร์ฟเวอร์ MCP ในเครื่องทำให้ผู้โจมตีสามารถแอบอ้างเป็นเซิร์ฟเวอร์และเข้าถึงบริการปลายทางได้
- **ช่องโหว่ token passthrough**: การจัดการโทเค็นที่ไม่เหมาะสมสร้างช่องทางให้ข้ามการควบคุมความปลอดภัยและช่องว่างความรับผิดชอบ
- **สิทธิ์ที่เกินจำเป็น**: เซิร์ฟเวอร์ MCP ที่มีสิทธิ์มากเกินไปละเมิดหลักการสิทธิ์น้อยที่สุดและขยายพื้นผิวการโจมตี

#### Token Passthrough: รูปแบบต่อต้านที่สำคัญ

**Token passthrough ถูกห้ามอย่างชัดเจน** ในข้อกำหนดการอนุญาต MCP ปัจจุบันเนื่องจากผลกระทบด้านความปลอดภัยที่รุนแรง:

##### การหลีกเลี่ยงการควบคุมความปลอดภัย
- เซิร์ฟเวอร์ MCP และ API ปลายทางใช้การควบคุมความปลอดภัยที่สำคัญ (จำกัดอัตรา, ตรวจสอบคำขอ, ตรวจสอบการจราจร) ซึ่งขึ้นอยู่กับการตรวจสอบโทเค็นที่ถูกต้อง
- การใช้โทเค็นโดยตรงจากไคลเอนต์ไปยัง API ข้ามการป้องกันเหล่านี้ ทำลายสถาปัตยกรรมความปลอดภัย

##### ความท้าทายด้านความรับผิดชอบและการตรวจสอบ  
- เซิร์ฟเวอร์ MCP ไม่สามารถแยกแยะระหว่างไคลเอนต์ที่ใช้โทเค็นที่ออกโดยต้นทางได้ ทำให้เส้นทางการตรวจสอบขาดหาย
- บันทึกเซิร์ฟเวอร์ทรัพยากรปลายทางแสดงแหล่งที่มาของคำขอที่ผิดพลาดแทนที่จะเป็นตัวกลางเซิร์ฟเวอร์ MCP จริง
- การสืบสวนเหตุการณ์และการตรวจสอบความสอดคล้องทำได้ยากขึ้นอย่างมาก

##### ความเสี่ยงการขโมยข้อมูล
- การอ้างสิทธิ์โทเค็นที่ไม่ได้รับการตรวจสอบอนุญาตให้ผู้ไม่หวังดีที่มีโทเค็นขโมยใช้เซิร์ฟเวอร์ MCP เป็นพร็อกซีสำหรับการขโมยข้อมูล
- การละเมิดขอบเขตความน่าเชื่อถืออนุญาตให้เข้าถึงโดยไม่ได้รับอนุญาตที่ข้ามการควบคุมความปลอดภัยที่ตั้งใจไว้

##### ช่องทางโจมตีหลายบริการ
- โทเค็นที่ถูกโจมตีและยอมรับโดยหลายบริการช่วยให้เคลื่อนที่ในระบบที่เชื่อมต่อกันได้
- สมมติฐานความน่าเชื่อถือระหว่างบริการอาจถูกละเมิดเมื่อไม่สามารถตรวจสอบแหล่งที่มาของโทเค็นได้

### การควบคุมความปลอดภัยและการบรรเทา

**ข้อกำหนดความปลอดภัยที่สำคัญ:**

> **บังคับใช้**: เซิร์ฟเวอร์ MCP **ต้องไม่** ยอมรับโทเค็นใด ๆ ที่ไม่ได้ออกโดยเฉพาะสำหรับเซิร์ฟเวอร์ MCP

#### การควบคุมการพิสูจน์ตัวตนและการอนุญาต

- **การตรวจสอบการอนุญาตอย่างเข้มงวด**: ดำเนินการตรวจสอบตรรกะการอนุญาตของเซิร์ฟเวอร์ MCP อย่างครอบคลุมเพื่อให้แน่ใจว่าเฉพาะผู้ใช้และไคลเอนต์ที่ตั้งใจเท่านั้นที่เข้าถึงทรัพยากรที่ละเอียดอ่อนได้
  - **คู่มือการใช้งาน**: [Azure API Management as Authentication Gateway for MCP Servers](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
  - **การผสานตัวตน**: [Using Microsoft Entra ID for MCP Server Authentication](https://den.dev/blog/mcp-server-auth-entra-id-session/)

- **การจัดการโทเค็นอย่างปลอดภัย**: นำ [แนวทางปฏิบัติที่ดีที่สุดของ Microsoft สำหรับการตรวจสอบและวงจรชีวิตโทเค็น](https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens) มาใช้
  - ตรวจสอบให้แน่ใจว่าโทเค็นมี audience ตรงกับตัวตนของเซิร์ฟเวอร์ MCP
  - ใช้นโยบายการหมุนเวียนและหมดอายุโทเค็นที่เหมาะสม
  - ป้องกันการโจมตีแบบ replay และการใช้งานโดยไม่ได้รับอนุญาต

- **การจัดเก็บโทเค็นที่ปลอดภัย**: จัดเก็บโทเค็นอย่างปลอดภัยด้วยการเข้ารหัสทั้งในที่เก็บและระหว่างการส่ง
  - **แนวทางปฏิบัติที่ดีที่สุด**: [Secure Token Storage and Encryption Guidelines](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)

#### การใช้งานการควบคุมการเข้าถึง

- **หลักการสิทธิ์น้อยที่สุด**: ให้สิทธิ์เซิร์ฟเวอร์ MCP เพียงขั้นต่ำที่จำเป็นสำหรับฟังก์ชันที่ตั้งใจ
  - ตรวจสอบและอัปเดตสิทธิ์เป็นประจำเพื่อป้องกันการเพิ่มสิทธิ์โดยไม่ตั้งใจ
  - **เอกสาร Microsoft**: [Secure Least-Privileged Access](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)

- **การควบคุมการเข้าถึงตามบทบาท (RBAC)**: ใช้งานการกำหนดบทบาทอย่างละเอียด
  - กำหนดขอบเขตบทบาทอย่างเข้มงวดกับทรัพยากรและการกระทำเฉพาะ
  - หลีกเลี่ยงสิทธิ์กว้างหรือไม่จำเป็นที่ขยายพื้นผิวการโจมตี

- **การตรวจสอบสิทธิ์อย่างต่อเนื่อง**: ดำเนินการตรวจสอบและติดตามการเข้าถึงอย่างต่อเนื่อง
  - ตรวจสอบรูปแบบการใช้สิทธิ์เพื่อหาความผิดปกติ
  - แก้ไขสิทธิ์ที่เกินจำเป็นหรือไม่ได้ใช้ทันที

## ภัยคุกคามความปลอดภัยเฉพาะ AI

### การฉีดคำสั่งและการโจมตีการจัดการเครื่องมือ

การใช้งาน MCP สมัยใหม่เผชิญกับช่องทางโจมตีเฉพาะ AI ที่ซับซ้อนซึ่งมาตรการความปลอดภัยแบบดั้งเดิมไม่สามารถจัดการได้อย่างเต็มที่:

#### **การฉีดคำสั่งแบบอ้อม (Cross-Domain Prompt Injection)**

**การฉีดคำสั่งแบบอ้อม** เป็นหนึ่งในช่องโหว่ที่สำคัญที่สุดในระบบ AI ที่เปิดใช้งาน MCP ผู้โจมตีฝังคำสั่งที่เป็นอันตรายไว้ในเนื้อหาภายนอก — เอกสาร, เว็บเพจ, อีเมล หรือแหล่งข้อมูล — ซึ่งระบบ AI จะประมวลผลเป็นคำสั่งที่ถูกต้องตามกฎหมาย

**สถานการณ์โจมตี:**
- **การฉีดในเอกสาร**: คำสั่งที่เป็นอันตรายซ่อนอยู่ในเอกสารที่ประมวลผลซึ่งกระตุ้นการทำงาน AI ที่ไม่ตั้งใจ
- **การใช้ประโยชน์จากเนื้อหาเว็บ**: เว็บเพจที่ถูกโจมตีซึ่งฝังคำสั่งที่ควบคุมพฤติกรรม AI เมื่อถูกดึงข้อมูล
- **การโจมตีผ่านอีเมล**: คำสั่งที่เป็นอันตรายในอีเมลที่ทำให้ผู้ช่วย AI รั่วไหลข้อมูลหรือทำงานโดยไม่ได้รับอนุญาต
- **การปนเปื้อนแหล่งข้อมูล**: ฐานข้อมูลหรือ API ที่ถูกโจมตีซึ่งให้เนื้อหาปนเปื้อนแก่ระบบ AI

**ผลกระทบในโลกจริง**: การโจมตีเหล่านี้อาจทำให้เกิดการขโมยข้อมูล, การละเมิดความเป็นส่วนตัว, การสร้างเนื้อหาที่เป็นอันตราย และการควบคุมปฏิสัมพันธ์ของผู้ใช้ สำหรับการวิเคราะห์โดยละเอียด ดูที่ [Prompt Injection in MCP (Simon Willison)](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)

![Prompt Injection Attack Diagram](../../../translated_images/th/prompt-injection.ed9fbfde297ca877c15bc6daa808681cd3c3dc7bf27bbbda342ef1ba5fc4f52d.png)

#### **การโจมตีวางยาพิษเครื่องมือ**

**การวางยาพิษเครื่องมือ** มุ่งเป้าไปที่ข้อมูลเมตาที่กำหนดเครื่องมือ MCP โดยใช้ประโยชน์จากวิธีที่ LLMs แปลความหมายคำอธิบายและพารามิเตอร์ของเครื่องมือเพื่อการตัดสินใจในการดำเนินการ

**กลไกการโจมตี:**
- **การจัดการข้อมูลเมตา**: ผู้โจมตีฉีดคำสั่งที่เป็นอันตรายลงในคำอธิบายเครื่องมือ, คำจำกัดความพารามิเตอร์ หรือ ตัวอย่างการใช้งาน
- **คำสั่งที่มองไม่เห็น**: คำสั่งที่ซ่อนอยู่ในข้อมูลเมตาของเครื่องมือซึ่งถูกประมวลผลโดยโมเดล AI แต่ไม่ปรากฏแก่ผู้ใช้มนุษย์
- **การแก้ไขเครื่องมือแบบไดนามิก ("Rug Pulls")**: เครื่องมือที่ได้รับการอนุมัติจากผู้ใช้ถูกแก้ไขภายหลังเพื่อทำงานที่เป็นอันตรายโดยที่ผู้ใช้ไม่รู้ตัว
- **การฉีดพารามิเตอร์**: เนื้อหาที่เป็นอันตรายฝังอยู่ในสคีมาพารามิเตอร์ของเครื่องมือที่มีผลต่อพฤติกรรมโมเดล

**ความเสี่ยงของเซิร์ฟเวอร์โฮสต์**: เซิร์ฟเวอร์ MCP ระยะไกลมีความเสี่ยงสูงขึ้นเนื่องจากคำจำกัดความเครื่องมือสามารถอัปเดตหลังจากได้รับการอนุมัติจากผู้ใช้แล้ว สร้างสถานการณ์ที่เครื่องมือที่เคยปลอดภัยกลายเป็นอันตราย สำหรับการวิเคราะห์อย่างละเอียด ดูที่ [Tool Poisoning Attacks (Invariant Labs)](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)

![Tool Injection Attack Diagram](../../../translated_images/th/tool-injection.3b0b4a6b24de6befe7d3afdeae44138ef005881aebcfc84c6f61369ce31e3640.png)

#### **ช่องทางโจมตี AI เพิ่มเติม**

- **การฉีดคำสั่งข้ามโดเมน (XPIA)**: การโจมตีที่ซับซ้อนซึ่งใช้เนื้อหาจากหลายโดเมนเพื่อข้ามการควบคุมความปลอดภัย
- **การแก้ไขความสามารถแบบไดนามิก**: การเปลี่ยนแปลงความสามารถของเครื่องมือแบบเรียลไทม์ที่หลบเลี่ยงการประเมินความปลอดภัยเบื้องต้น
- **การวางยาพิษหน้าต่างบริบท**: การโจมตีที่จัดการหน้าต่างบริบทขนาดใหญ่เพื่อซ่อนคำสั่งที่เป็นอันตราย
- **การโจมตีความสับสนของโมเดล**: การใช้ข้อจำกัดของโมเดลเพื่อสร้างพฤติกรรมที่ไม่คาดคิดหรือไม่ปลอดภัย

### ผลกระทบความเสี่ยงความปลอดภัย AI

**ผลลัพธ์ที่มีผลกระทบสูง:**
- **การขโมยข้อมูล**: การเข้าถึงและขโมยข้อมูลที่ละเอียดอ่อนขององค์กรหรือบุคคลโดยไม่ได้รับอนุญาต
- **การละเมิดความเป็นส่วนตัว**: การเปิดเผยข้อมูลส่วนบุคคล (PII) และข้อมูลธุรกิจที่เป็นความลับ  
- **การควบคุมระบบ**: การแก้ไขที่ไม่ตั้งใจต่อระบบและเวิร์กโฟลว์ที่สำคัญ
- **การขโมยข้อมูลรับรอง**: การละเมิดโทเค็นพิสูจน์ตัวตนและข้อมูลรับรองบริการ
- **การเคลื่อนที่ในระบบเครือข่าย**: การใช้ระบบ AI ที่ถูกโจมตีเป็นจุดหมุนสำหรับการโจมตีเครือข่ายที่กว้างขึ้น

### โซลูชันความปลอดภัย AI ของ Microsoft

#### **AI Prompt Shields: การปกป้องขั้นสูงจากการโจมตีฉีดคำสั่ง**

Microsoft **AI Prompt Shields** ให้การป้องกันอย่างครอบคลุมทั้งจากการโจมตีฉีดคำสั่งโดยตรงและแบบอ้อมผ่านหลายชั้นความปลอดภัย:

##### **กลไกการป้องกันหลัก:**

1. **การตรวจจับและกรองขั้นสูง**
   - อัลกอริทึมการเรียนรู้ของเครื่องและเทคนิค NLP ตรวจจับคำสั่งที่เป็นอันตรายในเนื้อหาภายนอก
   - การวิเคราะห์เอกสาร, เว็บเพจ, อีเมล และแหล่งข้อมูลแบบเรียลไทม์เพื่อหาภัยคุกคามที่ฝังอยู่
   - ความเข้าใจบริบทของรูปแบบคำสั่งที่ถูกต้องและเป็นอันตราย

2. **เทคนิคการเน้นจุด (Spotlighting)**  
   - แยกความแตกต่างระหว่างคำสั่งระบบที่เชื่อถือได้กับข้อมูลภายนอกที่อาจถูกโจมตี
   - วิธีการแปลงข้อความที่เพิ่มความเกี่ยวข้องของโมเดลในขณะเดียวกันก็กักกันเนื้อหาที่เป็นอันตราย
   - ช่วยให้ระบบ AI รักษาลำดับชั้นคำสั่งที่ถูกต้องและละเลยคำสั่งที่ถูกฉีด

3. **ระบบตัวคั่นและการทำเครื่องหมายข้อมูล**
   - กำหนดขอบเขตอย่างชัดเจนระหว่างข้อความระบบที่เชื่อถือได้กับข้อความภายนอก
   - ตัวบ่งชี้พิเศษเน้นขอบเขตระหว่างแหล่งข้อมูลที่เชื่อถือได้และไม่เชื่อถือ
   - การแยกอย่างชัดเจนป้องกันความสับสนของคำสั่งและการดำเนินการคำสั่งโดยไม่ได้รับอนุญาต

4. **ข่าวกรองภัยคุกคามอย่างต่อเนื่อง**
   - Microsoft ติดตามรูปแบบการโจมตีใหม่ ๆ อย่างต่อเนื่องและอัปเดตการป้องกัน
   - การล่าภัยคุกคามเชิงรุกสำหรับเทคนิคการฉีดคำสั่งและช่องทางโจมตีใหม่
   - การอัปเดตโมเดลความปลอดภัยเป็นประจำเพื่อรักษาประสิทธิภาพต่อภัยคุกคามที่พัฒนา

5. **การผสานรวม Azure Content Safety**
   - เป็นส่วนหนึ่งของชุด Azure AI Content Safety ที่ครอบคลุม
   - การตรวจจับเพิ่มเติมสำหรับความพยายาม jailbreak, เนื้อหาที่เป็นอันตราย และการละเมิดนโยบายความปลอดภัย
   - การควบคุมความปลอดภัยแบบรวมศูนย์ในส่วนประกอบแอปพลิเคชัน AI

**แหล่งข้อมูลการใช้งาน**: [Microsoft Prompt Shields Documentation](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)

![Microsoft Prompt Shields Protection](../../../translated_images/th/prompt-shield.ff5b95be76e9c78c6ec0888206a4a6a0a5ab4bb787832a9eceef7a62fe0138d1.png)


## ภัยคุกคามความปลอดภัย MCP ขั้นสูง

### ช่องโหว่การแฮ็กเซสชัน

**การแฮ็กเซสชัน** เป็นช่องทางโจมตีที่สำคัญในระบบ MCP แบบ stateful ที่ฝ่ายที่ไม่ได้รับอนุญาตสามารถได้มาซึ่งและใช้ประโยชน์จากตัวระบุเซสชันที่ถูกต้องเพื่อแอบอ้างเป็นไคลเอนต์และดำเนินการที่ไม่ได้รับอนุญาต

#### **สถานการณ์และความเสี่ยงการโจมตี**

- **การฉีดคำสั่งผ่านการแฮ็กเซสชัน**: ผู้โจมตีที่มี ID เซสชันที่ถูกขโมยฉีดเหตุการณ์ที่เป็นอันตรายเข้าสู่เซิร์ฟเวอร์ที่แชร์สถานะเซสชัน อาจกระตุ้นการกระทำที่เป็นอันตรายหรือเข้าถึงข้อมูลที่ละเอียดอ่อน
- **การแอบอ้างตัวตนโดยตรง**: ID เซสชันที่ถูกขโมยช่วยให้เรียกเซิร์ฟเวอร์ MCP โดยตรงโดยข้ามการพิสูจน์ตัวตน ทำให้ผู้โจมตีถูกปฏิบัติเหมือนผู้ใช้ที่ถูกต้อง
- **สตรีมที่สามารถทำงานต่อได้ถูกโจมตี**: ผู้โจมตีสามารถยุติคำขออย่างกะทันหัน ทำให้ไคลเอนต์ที่ถูกต้องทำงานต่อด้วยเนื้อหาที่อาจเป็นอันตราย

#### **การควบคุมความปลอดภัยสำหรับการจัดการเซสชัน**

**ข้อกำหนดที่สำคัญ:**
- **การตรวจสอบการอนุญาต**: เซิร์ฟเวอร์ MCP ที่ใช้งานการอนุญาต **ต้อง** ตรวจสอบคำขอขาเข้าทั้งหมดและ **ต้องไม่** พึ่งพาเซสชันสำหรับการตรวจสอบสิทธิ์
- **การสร้างเซสชันที่ปลอดภัย**: ใช้รหัสเซสชันที่ปลอดภัยทางคริปโตกราฟีและไม่สามารถทำนายได้ ซึ่งสร้างขึ้นด้วยตัวสร้างเลขสุ่มที่ปลอดภัย
- **การผูกกับผู้ใช้เฉพาะ**: ผูกรหัสเซสชันกับข้อมูลเฉพาะของผู้ใช้โดยใช้รูปแบบเช่น `<user_id>:<session_id>` เพื่อป้องกันการละเมิดเซสชันข้ามผู้ใช้
- **การจัดการวงจรชีวิตของเซสชัน**: ดำเนินการหมดอายุ การหมุนเวียน และการยกเลิกอย่างเหมาะสมเพื่อลดช่องโหว่
- **ความปลอดภัยของการส่งข้อมูล**: ต้องใช้ HTTPS สำหรับการสื่อสารทั้งหมดเพื่อป้องกันการดักจับรหัสเซสชัน

### ปัญหา Confused Deputy

**ปัญหา confused deputy** เกิดขึ้นเมื่อเซิร์ฟเวอร์ MCP ทำหน้าที่เป็นพร็อกซีตรวจสอบสิทธิ์ระหว่างไคลเอนต์กับบริการของบุคคลที่สาม ซึ่งเปิดโอกาสให้มีการข้ามการอนุญาตผ่านการใช้ประโยชน์จากรหัสไคลเอนต์แบบคงที่

#### **กลไกการโจมตีและความเสี่ยง**

- **การข้ามความยินยอมโดยใช้คุกกี้**: การตรวจสอบสิทธิ์ผู้ใช้ก่อนหน้านี้สร้างคุกกี้ความยินยอมที่ผู้โจมตีใช้ประโยชน์ผ่านคำขออนุญาตที่ประสงค์ร้ายพร้อม URI การเปลี่ยนเส้นทางที่สร้างขึ้น
- **การขโมยรหัสอนุญาต**: คุกกี้ความยินยอมที่มีอยู่ทำให้เซิร์ฟเวอร์อนุญาตข้ามหน้าจอความยินยอมและเปลี่ยนเส้นทางรหัสไปยังจุดสิ้นสุดที่ผู้โจมตีควบคุม  
- **การเข้าถึง API โดยไม่ได้รับอนุญาต**: รหัสอนุญาตที่ถูกขโมยช่วยให้แลกเปลี่ยนโทเค็นและแอบอ้างตัวผู้ใช้โดยไม่ต้องได้รับการอนุมัติอย่างชัดเจน

#### **กลยุทธ์การบรรเทา**

**การควบคุมที่บังคับใช้:**
- **ข้อกำหนดความยินยอมอย่างชัดเจน**: เซิร์ฟเวอร์พร็อกซี MCP ที่ใช้รหัสไคลเอนต์แบบคงที่ **ต้อง** ขอความยินยอมจากผู้ใช้สำหรับไคลเอนต์ที่ลงทะเบียนแบบไดนามิกแต่ละราย
- **การใช้งานความปลอดภัย OAuth 2.1**: ปฏิบัติตามแนวทางปฏิบัติด้านความปลอดภัย OAuth ล่าสุด รวมถึง PKCE (Proof Key for Code Exchange) สำหรับคำขออนุญาตทั้งหมด
- **การตรวจสอบไคลเอนต์อย่างเข้มงวด**: ดำเนินการตรวจสอบ URI การเปลี่ยนเส้นทางและตัวระบุไคลเอนต์อย่างเข้มงวดเพื่อป้องกันการใช้ประโยชน์

### ช่องโหว่ Token Passthrough  

**Token passthrough** เป็นรูปแบบต่อต้านที่ชัดเจนซึ่งเซิร์ฟเวอร์ MCP ยอมรับโทเค็นของไคลเอนต์โดยไม่ตรวจสอบอย่างเหมาะสมและส่งต่อไปยัง API ด้านล่าง ซึ่งละเมิดข้อกำหนดการอนุญาตของ MCP

#### **ผลกระทบด้านความปลอดภัย**

- **การหลีกเลี่ยงการควบคุม**: การใช้โทเค็นโดยตรงจากไคลเอนต์ไปยัง API ข้ามการจำกัดอัตรา การตรวจสอบ และการควบคุมการตรวจสอบ
- **การทำลายเส้นทางตรวจสอบ**: โทเค็นที่ออกโดยต้นทางทำให้ไม่สามารถระบุไคลเอนต์ได้ ทำลายความสามารถในการสืบสวนเหตุการณ์
- **การขโมยข้อมูลผ่านพร็อกซี**: โทเค็นที่ไม่ได้รับการตรวจสอบอนุญาตให้ผู้ประสงค์ร้ายใช้เซิร์ฟเวอร์เป็นพร็อกซีเพื่อเข้าถึงข้อมูลโดยไม่ได้รับอนุญาต
- **การละเมิดขอบเขตความเชื่อถือ**: บริการด้านล่างอาจถูกละเมิดสมมติฐานความเชื่อถือเมื่อไม่สามารถตรวจสอบแหล่งที่มาของโทเค็นได้
- **การขยายการโจมตีหลายบริการ**: โทเค็นที่ถูกบุกรุกและยอมรับในหลายบริการช่วยให้เคลื่อนที่ในแนวราบได้

#### **การควบคุมความปลอดภัยที่จำเป็น**

**ข้อกำหนดที่ไม่สามารถเจรจาได้:**
- **การตรวจสอบโทเค็น**: เซิร์ฟเวอร์ MCP **ต้องไม่** ยอมรับโทเค็นที่ไม่ได้ออกโดยชัดเจนสำหรับเซิร์ฟเวอร์ MCP
- **การตรวจสอบผู้รับโทเค็น**: ตรวจสอบเสมอว่าผู้รับโทเค็นตรงกับตัวตนของเซิร์ฟเวอร์ MCP
- **วงจรชีวิตโทเค็นที่เหมาะสม**: ใช้โทเค็นเข้าถึงที่มีอายุสั้นพร้อมการหมุนเวียนที่ปลอดภัย

## ความปลอดภัยของห่วงโซ่อุปทานสำหรับระบบ AI

ความปลอดภัยของห่วงโซ่อุปทานได้พัฒนาจากการพึ่งพาซอฟต์แวร์แบบดั้งเดิมไปสู่การครอบคลุมระบบนิเวศ AI ทั้งหมด การใช้งาน MCP สมัยใหม่ต้องตรวจสอบและติดตามส่วนประกอบ AI ทั้งหมดอย่างเข้มงวด เนื่องจากแต่ละส่วนประกอบนำช่องโหว่ที่อาจทำลายความสมบูรณ์ของระบบ

### ส่วนประกอบห่วงโซ่อุปทาน AI ที่ขยายออกไป

**การพึ่งพาซอฟต์แวร์แบบดั้งเดิม:**
- ไลบรารีและเฟรมเวิร์กโอเพนซอร์ส
- อิมเมจคอนเทนเนอร์และระบบฐาน  
- เครื่องมือพัฒนาและสายงานการสร้าง
- ส่วนประกอบและบริการโครงสร้างพื้นฐาน

**องค์ประกอบห่วงโซ่อุปทานเฉพาะ AI:**
- **โมเดลพื้นฐาน**: โมเดลที่ผ่านการฝึกอบรมล่วงหน้าจากผู้ให้บริการต่าง ๆ ที่ต้องตรวจสอบแหล่งที่มา
- **บริการฝังข้อมูล**: บริการเวกเตอร์และการค้นหาความหมายภายนอก
- **ผู้ให้บริการบริบท**: แหล่งข้อมูล ฐานความรู้ และคลังเอกสาร  
- **API ของบุคคลที่สาม**: บริการ AI ภายนอก สายงาน ML และจุดสิ้นสุดการประมวลผลข้อมูล
- **วัตถุโมเดล**: น้ำหนัก การกำหนดค่า และโมเดลที่ปรับแต่งเฉพาะ
- **แหล่งข้อมูลการฝึกอบรม**: ชุดข้อมูลที่ใช้สำหรับการฝึกและปรับแต่งโมเดล

### กลยุทธ์ความปลอดภัยห่วงโซ่อุปทานอย่างครบถ้วน

#### **การตรวจสอบส่วนประกอบและความเชื่อถือ**
- **การตรวจสอบแหล่งที่มา**: ตรวจสอบต้นกำเนิด การอนุญาต และความสมบูรณ์ของส่วนประกอบ AI ทั้งหมดก่อนการรวม
- **การประเมินความปลอดภัย**: ดำเนินการสแกนช่องโหว่และตรวจสอบความปลอดภัยสำหรับโมเดล แหล่งข้อมูล และบริการ AI
- **การวิเคราะห์ชื่อเสียง**: ประเมินประวัติความปลอดภัยและแนวปฏิบัติของผู้ให้บริการ AI
- **การตรวจสอบความสอดคล้อง**: ตรวจสอบให้แน่ใจว่าส่วนประกอบทั้งหมดเป็นไปตามข้อกำหนดด้านความปลอดภัยและกฎระเบียบขององค์กร

#### **สายงานการปรับใช้ที่ปลอดภัย**  
- **ความปลอดภัย CI/CD อัตโนมัติ**: รวมการสแกนความปลอดภัยตลอดสายงานการปรับใช้อัตโนมัติ
- **ความสมบูรณ์ของวัตถุ**: ดำเนินการตรวจสอบทางคริปโตกราฟีสำหรับวัตถุที่ปรับใช้ทั้งหมด (โค้ด โมเดล การกำหนดค่า)
- **การปรับใช้แบบเป็นขั้นตอน**: ใช้กลยุทธ์การปรับใช้แบบก้าวหน้าโดยมีการตรวจสอบความปลอดภัยในแต่ละขั้นตอน
- **ที่เก็บวัตถุที่เชื่อถือได้**: ปรับใช้เฉพาะจากที่เก็บวัตถุที่ได้รับการตรวจสอบและปลอดภัย

#### **การตรวจสอบและตอบสนองอย่างต่อเนื่อง**
- **การสแกนการพึ่งพา**: การตรวจสอบช่องโหว่อย่างต่อเนื่องสำหรับซอฟต์แวร์และส่วนประกอบ AI ทั้งหมด
- **การตรวจสอบโมเดล**: การประเมินพฤติกรรมโมเดลอย่างต่อเนื่อง การเปลี่ยนแปลงประสิทธิภาพ และความผิดปกติด้านความปลอดภัย
- **การติดตามสุขภาพบริการ**: ตรวจสอบบริการ AI ภายนอกสำหรับความพร้อมใช้งาน เหตุการณ์ความปลอดภัย และการเปลี่ยนแปลงนโยบาย
- **การผนวกรวมข่าวกรองภัยคุกคาม**: รวมฟีดภัยคุกคามเฉพาะสำหรับความเสี่ยงด้านความปลอดภัย AI และ ML

#### **การควบคุมการเข้าถึงและสิทธิ์ขั้นต่ำ**
- **สิทธิ์ระดับส่วนประกอบ**: จำกัดการเข้าถึงโมเดล ข้อมูล และบริการตามความจำเป็นทางธุรกิจ
- **การจัดการบัญชีบริการ**: ใช้บัญชีบริการเฉพาะที่มีสิทธิ์ขั้นต่ำที่จำเป็น
- **การแบ่งส่วนเครือข่าย**: แยกส่วนประกอบ AI และจำกัดการเข้าถึงเครือข่ายระหว่างบริการ
- **การควบคุมเกตเวย์ API**: ใช้เกตเวย์ API กลางเพื่อควบคุมและตรวจสอบการเข้าถึงบริการ AI ภายนอก

#### **การตอบสนองและกู้คืนเหตุการณ์**
- **ขั้นตอนตอบสนองอย่างรวดเร็ว**: กระบวนการที่กำหนดไว้สำหรับการแพตช์หรือเปลี่ยนส่วนประกอบ AI ที่ถูกบุกรุก
- **การหมุนเวียนข้อมูลรับรอง**: ระบบอัตโนมัติสำหรับการหมุนเวียนความลับ คีย์ API และข้อมูลรับรองบริการ
- **ความสามารถในการย้อนกลับ**: ความสามารถในการย้อนกลับไปยังเวอร์ชันที่รู้จักว่าปลอดภัยก่อนหน้าได้อย่างรวดเร็ว
- **การกู้คืนจากการละเมิดห่วงโซ่อุปทาน**: ขั้นตอนเฉพาะสำหรับตอบสนองต่อการบุกรุกบริการ AI ต้นทาง

### เครื่องมือและการผนวกรวมความปลอดภัยของ Microsoft

**GitHub Advanced Security** ให้การปกป้องห่วงโซ่อุปทานอย่างครบถ้วน รวมถึง:
- **การสแกนความลับ**: ตรวจจับอัตโนมัติของข้อมูลรับรอง คีย์ API และโทเค็นในที่เก็บข้อมูล
- **การสแกนการพึ่งพา**: การประเมินช่องโหว่สำหรับการพึ่งพาและไลบรารีโอเพนซอร์ส
- **การวิเคราะห์ CodeQL**: การวิเคราะห์โค้ดแบบสแตติกสำหรับช่องโหว่ด้านความปลอดภัยและปัญหาการเขียนโค้ด
- **ข้อมูลเชิงลึกห่วงโซ่อุปทาน**: มองเห็นสุขภาพและสถานะความปลอดภัยของการพึ่งพา

**การผนวกรวม Azure DevOps & Azure Repos:**
- การผนวกรวมการสแกนความปลอดภัยอย่างราบรื่นในแพลตฟอร์มการพัฒนาของ Microsoft
- การตรวจสอบความปลอดภัยอัตโนมัติใน Azure Pipelines สำหรับงาน AI
- การบังคับใช้นโยบายสำหรับการปรับใช้ส่วนประกอบ AI ที่ปลอดภัย

**แนวปฏิบัติภายในของ Microsoft:**
Microsoft ดำเนินการแนวปฏิบัติความปลอดภัยห่วงโซ่อุปทานอย่างกว้างขวางในผลิตภัณฑ์ทั้งหมด เรียนรู้เกี่ยวกับแนวทางที่พิสูจน์แล้วใน [The Journey to Secure the Software Supply Chain at Microsoft](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/).

## แนวปฏิบัติความปลอดภัยพื้นฐานของ Foundation

การใช้งาน MCP สืบทอดและสร้างบนฐานความปลอดภัยที่มีอยู่ขององค์กรของคุณ การเสริมสร้างแนวปฏิบัติความปลอดภัยพื้นฐานช่วยเพิ่มความปลอดภัยโดยรวมของระบบ AI และการปรับใช้ MCP อย่างมาก

### พื้นฐานความปลอดภัยหลัก

#### **แนวปฏิบัติการพัฒนาที่ปลอดภัย**
- **การปฏิบัติตาม OWASP**: ป้องกันช่องโหว่เว็บแอปพลิเคชัน [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- **การป้องกันเฉพาะ AI**: ดำเนินการควบคุมสำหรับ [OWASP Top 10 สำหรับ LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559)
- **การจัดการความลับที่ปลอดภัย**: ใช้คลังเก็บเฉพาะสำหรับโทเค็น คีย์ API และข้อมูลการกำหนดค่าที่ละเอียดอ่อน
- **การเข้ารหัสแบบครบวงจร**: ใช้การสื่อสารที่ปลอดภัยในทุกส่วนประกอบแอปพลิเคชันและการไหลของข้อมูล
- **การตรวจสอบข้อมูลนำเข้า**: ตรวจสอบอย่างเข้มงวดสำหรับข้อมูลนำเข้าทั้งหมดของผู้ใช้ พารามิเตอร์ API และแหล่งข้อมูล

#### **การเสริมความแข็งแกร่งโครงสร้างพื้นฐาน**
- **การยืนยันตัวตนหลายปัจจัย**: บังคับใช้ MFA สำหรับบัญชีผู้ดูแลและบัญชีบริการทั้งหมด
- **การจัดการแพตช์**: การแพตช์อัตโนมัติและทันเวลา สำหรับระบบปฏิบัติการ เฟรมเวิร์ก และการพึ่งพา  
- **การผนวกรวมผู้ให้บริการตัวตน**: การจัดการตัวตนแบบรวมศูนย์ผ่านผู้ให้บริการตัวตนองค์กร (Microsoft Entra ID, Active Directory)
- **การแบ่งส่วนเครือข่าย**: การแยกส่วนประกอบ MCP อย่างมีตรรกะเพื่อลดความเสี่ยงการเคลื่อนที่ในแนวราบ
- **หลักการสิทธิ์ขั้นต่ำ**: ให้สิทธิ์ขั้นต่ำที่จำเป็นสำหรับส่วนประกอบและบัญชีระบบทั้งหมด

#### **การตรวจสอบและตรวจจับความปลอดภัย**
- **การบันทึกอย่างครบถ้วน**: บันทึกรายละเอียดกิจกรรมแอปพลิเคชัน AI รวมถึงการโต้ตอบไคลเอนต์-เซิร์ฟเวอร์ MCP
- **การผนวกรวม SIEM**: การจัดการข้อมูลและเหตุการณ์ความปลอดภัยแบบรวมศูนย์สำหรับการตรวจจับความผิดปกติ
- **การวิเคราะห์พฤติกรรม**: การตรวจสอบด้วย AI เพื่อค้นหารูปแบบที่ผิดปกติในระบบและพฤติกรรมผู้ใช้
- **ข่าวกรองภัยคุกคาม**: การผนวกรวมฟีดภัยคุกคามภายนอกและตัวบ่งชี้การบุกรุก (IOC)
- **การตอบสนองต่อเหตุการณ์**: ขั้นตอนที่ชัดเจนสำหรับการตรวจจับ ตอบสนอง และกู้คืนเหตุการณ์ความปลอดภัย

#### **สถาปัตยกรรม Zero Trust**
- **ไม่เชื่อถือใคร ตรวจสอบเสมอ**: การตรวจสอบอย่างต่อเนื่องของผู้ใช้ อุปกรณ์ และการเชื่อมต่อเครือข่าย
- **การแบ่งส่วนย่อยเครือข่าย**: การควบคุมเครือข่ายอย่างละเอียดที่แยกงานและบริการแต่ละรายการ
- **ความปลอดภัยที่เน้นตัวตน**: นโยบายความปลอดภัยที่อิงตามตัวตนที่ตรวจสอบได้แทนตำแหน่งเครือข่าย
- **การประเมินความเสี่ยงอย่างต่อเนื่อง**: การประเมินสถานะความปลอดภัยแบบไดนามิกตามบริบทและพฤติกรรมปัจจุบัน
- **การเข้าถึงแบบมีเงื่อนไข**: การควบคุมการเข้าถึงที่ปรับตามปัจจัยความเสี่ยง ตำแหน่ง และความเชื่อถือของอุปกรณ์

### รูปแบบการผนวกรวมองค์กร

#### **การผนวกรวมระบบนิเวศความปลอดภัยของ Microsoft**
- **Microsoft Defender for Cloud**: การจัดการสถานะความปลอดภัยคลาวด์อย่างครบถ้วน
- **Azure Sentinel**: SIEM และ SOAR แบบเนทีฟคลาวด์สำหรับการปกป้องงาน AI
- **Microsoft Entra ID**: การจัดการตัวตนและการเข้าถึงองค์กรพร้อมนโยบายการเข้าถึงแบบมีเงื่อนไข
- **Azure Key Vault**: การจัดการความลับแบบรวมศูนย์พร้อมฮาร์ดแวร์โมดูลความปลอดภัย (HSM)
- **Microsoft Purview**: การกำกับดูแลข้อมูลและการปฏิบัติตามข้อกำหนดสำหรับแหล่งข้อมูลและเวิร์กโฟลว์ AI

#### **การปฏิบัติตามข้อกำหนดและการกำกับดูแล**
- **การสอดคล้องกับกฎระเบียบ**: ตรวจสอบให้แน่ใจว่าการใช้งาน MCP เป็นไปตามข้อกำหนดเฉพาะอุตสาหกรรม (GDPR, HIPAA, SOC 2)
- **การจัดประเภทข้อมูล**: การจัดหมวดหมู่และการจัดการข้อมูลที่ละเอียดอ่อนที่ประมวลผลโดยระบบ AI อย่างเหมาะสม
- **เส้นทางตรวจสอบ**: การบันทึกอย่างครบถ้วนสำหรับการปฏิบัติตามกฎระเบียบและการสืบสวนทางนิติวิทยาศาสตร์
- **การควบคุมความเป็นส่วนตัว**: การนำหลักการความเป็นส่วนตัวโดยการออกแบบมาใช้ในสถาปัตยกรรมระบบ AI
- **การจัดการการเปลี่ยนแปลง**: กระบวนการอย่างเป็นทางการสำหรับการตรวจสอบความปลอดภัยของการเปลี่ยนแปลงระบบ AI

แนวปฏิบัติพื้นฐานเหล่านี้สร้างฐานความปลอดภัยที่แข็งแกร่งซึ่งช่วยเพิ่มประสิทธิภาพของการควบคุมความปลอดภัยเฉพาะ MCP และให้การปกป้องอย่างครบถ้วนสำหรับแอปพลิเคชันที่ขับเคลื่อนด้วย AI

## ข้อสรุปความปลอดภัยสำคัญ

- **แนวทางความปลอดภัยแบบหลายชั้น**: รวมแนวปฏิบัติความปลอดภัยพื้นฐาน (การเขียนโค้ดที่ปลอดภัย สิทธิ์ขั้นต่ำ การตรวจสอบห่วงโซ่อุปทาน การตรวจสอบอย่างต่อเนื่อง) กับการควบคุมเฉพาะ AI เพื่อการปกป้องอย่างครบถ้วน

- **ภูมิทัศน์ภัยคุกคามเฉพาะ AI**: ระบบ MCP เผชิญความเสี่ยงเฉพาะ เช่น การฉีดพรอมต์ การวางยาพิษเครื่องมือ การแย่งชิงเซสชัน ปัญหา confused deputy ช่องโหว่ token passthrough และสิทธิ์เกินจำเป็นที่ต้องการการบรรเทาเฉพาะ

- **ความเป็นเลิศด้านการตรวจสอบสิทธิ์และการอนุญาต**: ใช้การตรวจสอบสิทธิ์ที่แข็งแกร่งโดยใช้ผู้ให้บริการตัวตนภายนอก (Microsoft Entra ID) บังคับใช้การตรวจสอบโทเค็นอย่างเหมาะสม และไม่ยอมรับโทเค็นที่ไม่ได้ออกโดยชัดเจนสำหรับเซิร์ฟเวอร์ MCP ของคุณ

- **การป้องกันการโจมตี AI**: ปรับใช้ Microsoft Prompt Shields และ Azure Content Safety เพื่อป้องกันการฉีดพรอมต์ทางอ้อมและการวางยาพิษเครื่องมือ พร้อมตรวจสอบเมตาดาต้าเครื่องมือและติดตามการเปลี่ยนแปลงแบบไดนามิก

- **ความปลอดภัยของเซสชันและการส่งข้อมูล**: ใช้รหัสเซสชันที่ปลอดภัยทางคริปโตกราฟีและไม่สามารถทำนายได้ ผูกกับตัวตนผู้ใช้ ดำเนินการจัดการวงจรชีวิตเซสชันอย่างเหมาะสม และไม่ใช้เซสชันสำหรับการตรวจสอบสิทธิ์

- **แนวปฏิบัติความปลอดภัย OAuth ที่ดีที่สุด**: ป้องกันการโจมตี confused deputy ผ่านความยินยอมของผู้ใช้อย่างชัดเจนสำหรับไคลเอนต์ที่ลงทะเบียนแบบไดนามิก การใช้งาน OAuth 2.1 ที่ถูกต้องพร้อม PKCE และการตรวจสอบ URI การเปลี่ยนเส้นทางอย่างเข้มงวด

- **หลักการความปลอดภัยโทเค็น**: หลีกเลี่ยงรูปแบบ token passthrough ที่ไม่เหมาะสม ตรวจสอบคำอ้างสิทธิ์ผู้รับโทเค็น ใช้โทเค็นที่มีอายุสั้นพร้อมการหมุนเวียนที่ปลอดภัย และรักษาขอบเขตความเชื่อถือที่ชัดเจน

- **ความปลอดภัยห่วงโซ่อุปทานอย่างครบถ้วน**: ปฏิบัติต่อส่วนประกอบระบบนิเวศ AI ทั้งหมด (โมเดล การฝังข้อมูล ผู้ให้บริการบริบท API ภายนอก) ด้วยความเข้มงวดด้านความปลอดภัยเทียบเท่าการพึ่งพาซอฟต์แวร์แบบดั้งเดิม

- **การพัฒนาอย่างต่อเนื่อง**: ติดตามข้อกำหนด MCP ที่พัฒนาอย่างรวดเร็ว มีส่วนร่วมในมาตรฐานชุมชนความปลอดภัย และรักษาสถานะความปลอดภัยที่ปรับตัวได้ตามการเติบโตของโปรโตคอล

- **การผนวกรวมความปลอดภัยของ Microsoft**: ใช้ระบบนิเวศความปลอดภัยของ Microsoft อย่างครบถ้วน (Prompt Shields, Azure Content Safety, GitHub Advanced Security, Entra ID) เพื่อเพิ่มการปกป้องการปรับใช้ MCP

## แหล่งข้อมูลครบถ้วน

### **เอกสารความปลอดภัย MCP อย่างเป็นทางการ**
- [MCP Specification (Current: 2025-11-25)](https://spec.modelcontextprotocol.io/specification/2025-11-25/)
- [MCP Security Best Practices](https://modelcontextprotocol.io/specification/2025-11-25/basic/security_best_practices)
- [MCP Authorization Specification](https://modelcontextprotocol.io/specification/2025-11-25/basic/authorization)
- [MCP GitHub Repository](https://github.com/modelcontextprotocol)

### **มาตรฐานและแนวปฏิบัติความปลอดภัย**
- [OAuth 2.0 Security Best Practices (RFC 9700)](https://datatracker.ietf.org/doc/html/rfc9700)
- [OWASP Top 10 Web Application Security](https://owasp.org/www-project-top-ten/)
- [OWASP Top 10 for Large Language Models](https://genai.owasp.org/download/43299/?tmstv=1731900559)
- [Microsoft Digital Defense Report](https://aka.ms/mddr)

### **งานวิจัยและวิเคราะห์ความปลอดภัย AI**
- [Prompt Injection in MCP (Simon Willison)](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)
- [Tool Poisoning Attacks (Invariant Labs)](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)
- [สรุปงานวิจัยความปลอดภัย MCP (Wiz Security)](https://www.wiz.io/blog/mcp-security-research-briefing#remote-servers-22)

### **โซลูชันความปลอดภัยของ Microsoft**
- [เอกสาร Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)
- [บริการ Azure Content Safety](https://learn.microsoft.com/azure/ai-services/content-safety/)
- [ความปลอดภัย Microsoft Entra ID](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)
- [แนวทางปฏิบัติที่ดีที่สุดในการจัดการโทเค็น Azure](https://learn.microsoft.com/entra/identity-platform/access-tokens)
- [GitHub Advanced Security](https://github.com/security/advanced-security)

### **คู่มือการใช้งาน & บทเรียน**
- [การจัดการ API Azure เป็นเกตเวย์การตรวจสอบสิทธิ์ MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
- [การตรวจสอบสิทธิ์ Microsoft Entra ID กับเซิร์ฟเวอร์ MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)
- [การจัดเก็บและเข้ารหัสโทเค็นอย่างปลอดภัย (วิดีโอ)](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)

### **ความปลอดภัย DevOps & ห่วงโซ่อุปทาน**
- [ความปลอดภัย Azure DevOps](https://azure.microsoft.com/products/devops)
- [ความปลอดภัย Azure Repos](https://azure.microsoft.com/products/devops/repos/)
- [การเดินทางสู่ความปลอดภัยห่วงโซ่อุปทานซอฟต์แวร์ของ Microsoft](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/)

## **เอกสารความปลอดภัยเพิ่มเติม**

สำหรับคำแนะนำความปลอดภัยอย่างครบถ้วน โปรดดูเอกสารเฉพาะทางในส่วนนี้:

- **[แนวทางปฏิบัติความปลอดภัย MCP 2025](./mcp-security-best-practices-2025.md)** - แนวทางปฏิบัติความปลอดภัยครบถ้วนสำหรับการใช้งาน MCP
- **[การใช้งาน Azure Content Safety](./azure-content-safety-implementation.md)** - ตัวอย่างการใช้งานจริงสำหรับการผสานรวม Azure Content Safety  
- **[การควบคุมความปลอดภัย MCP 2025](./mcp-security-controls-2025.md)** - การควบคุมและเทคนิคความปลอดภัยล่าสุดสำหรับการใช้งาน MCP
- **[คู่มืออ้างอิงด่วนแนวทางปฏิบัติ MCP](./mcp-best-practices.md)** - คู่มืออ้างอิงด่วนสำหรับแนวทางปฏิบัติความปลอดภัย MCP ที่จำเป็น

---

## ต่อไป

ถัดไป: [บทที่ 3: การเริ่มต้น](../03-GettingStarted/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**ข้อจำกัดความรับผิดชอบ**:  
เอกสารนี้ได้รับการแปลโดยใช้บริการแปลภาษาอัตโนมัติ [Co-op Translator](https://github.com/Azure/co-op-translator) แม้เราจะพยายามให้ความถูกต้องสูงสุด แต่โปรดทราบว่าการแปลอัตโนมัติอาจมีข้อผิดพลาดหรือความไม่ถูกต้อง เอกสารต้นฉบับในภาษาต้นทางถือเป็นแหล่งข้อมูลที่เชื่อถือได้ สำหรับข้อมูลที่สำคัญ ขอแนะนำให้ใช้บริการแปลโดยผู้เชี่ยวชาญมนุษย์ เราไม่รับผิดชอบต่อความเข้าใจผิดหรือการตีความผิดใด ๆ ที่เกิดจากการใช้การแปลนี้
<!-- CO-OP TRANSLATOR DISCLAIMER END -->
# MCP Security: Комплексний захист для AI-систем

[![MCP Security Best Practices](../../../translated_images/uk/03.175aed6dedae133f9d41e49cefd0f0a9a39c3317e1eaa7ef7182696af7534308.png)](https://youtu.be/88No8pw706o)

_(Натисніть на зображення вище, щоб переглянути відео цього уроку)_

Безпека є фундаментальною для проєктування AI-систем, саме тому ми приділяємо їй пріоритет у другому розділі. Це відповідає принципу Microsoft **Secure by Design** з [ініціативи Secure Future](https://www.microsoft.com/security/blog/2025/04/17/microsofts-secure-by-design-journey-one-year-of-success/).

Протокол контексту моделі (MCP) надає потужні нові можливості для AI-додатків, водночас вводячи унікальні виклики безпеки, що виходять за межі традиційних ризиків програмного забезпечення. Системи MCP стикаються як із відомими проблемами безпеки (безпечне кодування, мінімальні привілеї, безпека ланцюга постачання), так і з новими специфічними для AI загрозами, включно з ін’єкцією підказок, отруєнням інструментів, викраденням сесій, атаками «заплутаного довіреного», уразливостями передачі токенів і динамічною модифікацією можливостей.

Цей урок розглядає найкритичніші ризики безпеки в реалізаціях MCP — охоплюючи автентифікацію, авторизацію, надмірні дозволи, непряму ін’єкцію підказок, безпеку сесій, проблеми «заплутаного довіреного», управління токенами та вразливості ланцюга постачання. Ви дізнаєтеся про практичні заходи контролю та найкращі практики для пом’якшення цих ризиків, використовуючи рішення Microsoft, такі як Prompt Shields, Azure Content Safety і GitHub Advanced Security для посилення вашого розгортання MCP.

## Цілі навчання

До кінця цього уроку ви зможете:

- **Визначати специфічні загрози MCP**: Розпізнавати унікальні ризики безпеки в системах MCP, включно з ін’єкцією підказок, отруєнням інструментів, надмірними дозволами, викраденням сесій, проблемами «заплутаного довіреного», уразливостями передачі токенів і ризиками ланцюга постачання
- **Застосовувати заходи безпеки**: Впроваджувати ефективні пом’якшення, включно з надійною автентифікацією, доступом за принципом мінімальних привілеїв, безпечним управлінням токенами, контролем безпеки сесій і перевіркою ланцюга постачання
- **Використовувати рішення Microsoft для безпеки**: Розуміти та впроваджувати Microsoft Prompt Shields, Azure Content Safety і GitHub Advanced Security для захисту робочих навантажень MCP
- **Перевіряти безпеку інструментів**: Усвідомлювати важливість валідації метаданих інструментів, моніторингу динамічних змін і захисту від непрямих атак ін’єкції підказок
- **Інтегрувати найкращі практики**: Поєднувати встановлені основи безпеки (безпечне кодування, захист серверів, нульову довіру) з контролями, специфічними для MCP, для комплексного захисту

# Архітектура та контролі безпеки MCP

Сучасні реалізації MCP потребують багаторівневих підходів до безпеки, які охоплюють як традиційну безпеку програмного забезпечення, так і специфічні для AI загрози. Швидко еволюційна специфікація MCP продовжує вдосконалювати свої заходи безпеки, забезпечуючи кращу інтеграцію з архітектурами корпоративної безпеки та встановленими найкращими практиками.

Дослідження з [Microsoft Digital Defense Report](https://aka.ms/mddr) демонструють, що **98% зафіксованих порушень можна було б запобігти за допомогою надійної гігієни безпеки**. Найефективніша стратегія захисту поєднує базові практики безпеки з контролями, специфічними для MCP — перевірені базові заходи безпеки залишаються найвпливовішими у зниженні загального ризику.

## Поточний ландшафт безпеки

> **Примітка:** Ця інформація відображає стандарти безпеки MCP станом на **18 грудня 2025 року**. Протокол MCP продовжує швидко розвиватися, і майбутні реалізації можуть вводити нові схеми автентифікації та покращені контролі. Завжди звертайтеся до актуальної [специфікації MCP](https://spec.modelcontextprotocol.io/), [репозиторію MCP на GitHub](https://github.com/modelcontextprotocol) та [документації з найкращих практик безпеки](https://modelcontextprotocol.io/specification/2025-11-25/basic/security_best_practices) для останніх рекомендацій.

### Еволюція автентифікації MCP

Специфікація MCP значно еволюціонувала у підходах до автентифікації та авторизації:

- **Початковий підхід**: Ранні специфікації вимагали від розробників впроваджувати власні сервери автентифікації, при цьому сервери MCP діяли як сервери авторизації OAuth 2.0, безпосередньо керуючи автентифікацією користувачів
- **Поточний стандарт (2025-11-25)**: Оновлена специфікація дозволяє серверам MCP делегувати автентифікацію зовнішнім провайдерам ідентичності (наприклад, Microsoft Entra ID), покращуючи безпеку та знижуючи складність реалізації
- **Безпека транспортного рівня**: Покращена підтримка безпечних транспортних механізмів із належними схемами автентифікації як для локальних (STDIO), так і для віддалених (Streamable HTTP) з’єднань

## Безпека автентифікації та авторизації

### Поточні виклики безпеки

Сучасні реалізації MCP стикаються з кількома викликами автентифікації та авторизації:

### Ризики та вектори загроз

- **Неправильно налаштована логіка авторизації**: Помилки в реалізації авторизації на серверах MCP можуть призвести до розкриття конфіденційних даних і неправильного застосування контролю доступу
- **Компрометація OAuth-токенів**: Крадіжка токенів локального сервера MCP дозволяє зловмисникам видавати себе за сервери та отримувати доступ до підлеглих сервісів
- **Уразливості передачі токенів**: Неправильне поводження з токенами створює обхід контролів безпеки та прогалини в підзвітності
- **Надмірні дозволи**: Надмірні привілеї серверів MCP порушують принцип мінімальних привілеїв і розширюють поверхню атаки

#### Передача токенів: критичний анти-патерн

**Передача токенів категорично заборонена** у поточній специфікації авторизації MCP через серйозні наслідки для безпеки:

##### Обхід контролю безпеки
- Сервери MCP і підлеглі API реалізують критичні заходи безпеки (обмеження частоти, валідація запитів, моніторинг трафіку), які залежать від правильної перевірки токенів
- Пряме використання токенів клієнтом для API обходить ці важливі захисти, підриваючи архітектуру безпеки

##### Проблеми підзвітності та аудиту  
- Сервери MCP не можуть відрізнити клієнтів, які використовують токени, видані вгорі, що порушує аудиторські ланцюжки
- Логи серверів ресурсів показують хибне походження запитів замість фактичних проміжних серверів MCP
- Розслідування інцидентів і аудит відповідності значно ускладнюються

##### Ризики витоку даних
- Невалідація претензій токенів дозволяє зловмисникам із викраденими токенами використовувати сервери MCP як проксі для витоку даних
- Порушення меж довіри дозволяє несанкціоновані схеми доступу, що обходять передбачені заходи безпеки

##### Вектори атак через кілька сервісів
- Компрометовані токени, прийняті кількома сервісами, дозволяють рухатися латерально між підключеними системами
- Припущення довіри між сервісами можуть бути порушені, якщо походження токенів не можна перевірити

### Контролі безпеки та пом’якшення

**Критичні вимоги безпеки:**

> **ОБОВ’ЯЗКОВО**: Сервери MCP **НЕ ПОВИННІ** приймати будь-які токени, які не були явно видані для сервера MCP

#### Контролі автентифікації та авторизації

- **Ретельний аудит авторизації**: Проводьте комплексні перевірки логіки авторизації серверів MCP, щоб гарантувати доступ лише для передбачених користувачів і клієнтів
  - **Посібник з реалізації**: [Azure API Management як шлюз автентифікації для серверів MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
  - **Інтеграція ідентичності**: [Використання Microsoft Entra ID для автентифікації серверів MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)

- **Безпечне управління токенами**: Впроваджуйте [найкращі практики Microsoft щодо валідації токенів і життєвого циклу](https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens)
  - Перевіряйте, що претензії аудиторії токена відповідають ідентичності сервера MCP
  - Впроваджуйте належну ротацію та політики закінчення терміну дії токенів
  - Запобігайте атакам повторного використання токенів і несанкціонованому використанню

- **Захищене зберігання токенів**: Захищайте токени шифруванням як у стані спокою, так і під час передачі
  - **Найкращі практики**: [Рекомендації щодо безпечного зберігання та шифрування токенів](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)

#### Впровадження контролю доступу

- **Принцип мінімальних привілеїв**: Надавайте серверам MCP лише мінімальні дозволи, необхідні для передбаченої функціональності
  - Регулярні перевірки та оновлення дозволів для запобігання накопиченню привілеїв
  - **Документація Microsoft**: [Безпечний доступ з мінімальними привілеями](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)

- **Рольовий контроль доступу (RBAC)**: Впроваджуйте тонке призначення ролей
  - Чітко обмежуйте ролі конкретними ресурсами та діями
  - Уникайте широких або непотрібних дозволів, що розширюють поверхню атаки

- **Постійний моніторинг дозволів**: Впроваджуйте безперервний аудит і моніторинг доступу
  - Відстежуйте патерни використання дозволів на предмет аномалій
  - Швидко усувайте надмірні або невикористані привілеї

## Специфічні загрози безпеці AI

### Атаки ін’єкції підказок та маніпуляції інструментами

Сучасні реалізації MCP стикаються зі складними специфічними для AI векторами атак, які традиційні заходи безпеки не можуть повністю нейтралізувати:

#### **Непряма ін’єкція підказок (Cross-Domain Prompt Injection)**

**Непряма ін’єкція підказок** є однією з найкритичніших уразливостей у AI-системах з підтримкою MCP. Зловмисники вбудовують шкідливі інструкції у зовнішній контент — документи, веб-сторінки, електронні листи або джерела даних, які AI-системи потім обробляють як легітимні команди.

**Сценарії атак:**
- **Ін’єкція через документи**: Шкідливі інструкції, приховані в оброблюваних документах, що викликають небажані дії AI
- **Експлуатація веб-контенту**: Компрометовані веб-сторінки з вбудованими підказками, які маніпулюють поведінкою AI при скрапінгу
- **Атаки через електронну пошту**: Шкідливі підказки в листах, що змушують AI-помічників розкривати інформацію або виконувати несанкціоновані дії
- **Забруднення джерел даних**: Компрометовані бази даних або API, що постачають заражений контент AI-системам

**Реальний вплив**: Ці атаки можуть призводити до витоку даних, порушення конфіденційності, генерації шкідливого контенту та маніпуляції взаємодією з користувачем. Детальний аналіз див. у [Prompt Injection в MCP (Simon Willison)](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/).

![Prompt Injection Attack Diagram](../../../translated_images/uk/prompt-injection.ed9fbfde297ca877c15bc6daa808681cd3c3dc7bf27bbbda342ef1ba5fc4f52d.png)

#### **Атаки отруєння інструментів**

**Отруєння інструментів** спрямоване на метадані, що визначають інструменти MCP, використовуючи те, як великі мовні моделі інтерпретують описи інструментів і параметри для прийняття рішень про виконання.

**Механізми атак:**
- **Маніпуляція метаданими**: Зловмисники впроваджують шкідливі інструкції в описи інструментів, визначення параметрів або приклади використання
- **Невидимі інструкції**: Приховані підказки в метаданих інструментів, які обробляються AI-моделями, але невидимі для користувачів
- **Динамічна модифікація інструментів («Rug Pulls»)**: Інструменти, схвалені користувачами, пізніше змінюються для виконання шкідливих дій без відома користувача
- **Ін’єкція параметрів**: Шкідливий контент, вбудований у схеми параметрів інструментів, що впливає на поведінку моделі

**Ризики хостингових серверів**: Віддалені сервери MCP мають підвищені ризики, оскільки визначення інструментів можуть оновлюватися після початкового схвалення користувачем, створюючи сценарії, де раніше безпечні інструменти стають шкідливими. Для повного аналізу див. [Атаки отруєння інструментів (Invariant Labs)](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks).

![Tool Injection Attack Diagram](../../../translated_images/uk/tool-injection.3b0b4a6b24de6befe7d3afdeae44138ef005881aebcfc84c6f61369ce31e3640.png)

#### **Додаткові вектори атак AI**

- **Крос-доменна ін’єкція підказок (XPIA)**: Складні атаки, що використовують контент із кількох доменів для обходу контролів безпеки
- **Динамічна модифікація можливостей**: Зміни можливостей інструментів у реальному часі, що уникають початкових оцінок безпеки
- **Отруєння контекстного вікна**: Атаки, що маніпулюють великими контекстними вікнами для приховування шкідливих інструкцій
- **Атаки на плутанину моделі**: Використання обмежень моделі для створення непередбачуваної або небезпечної поведінки

### Вплив ризиків безпеки AI

**Наслідки з високим впливом:**
- **Витік даних**: Несанкціонований доступ і крадіжка конфіденційних корпоративних або персональних даних
- **Порушення конфіденційності**: Розкриття персональних ідентифікаційних даних (PII) і конфіденційної бізнес-інформації  
- **Маніпуляції системами**: Небажані зміни критичних систем і робочих процесів
- **Крадіжка облікових даних**: Компрометація токенів автентифікації та облікових даних сервісів
- **Латеральний рух**: Використання скомпрометованих AI-систем як точок опори для ширших мережевих атак

### Рішення Microsoft для безпеки AI

#### **AI Prompt Shields: просунутий захист від атак ін’єкції**

Microsoft **AI Prompt Shields** забезпечують комплексний захист від прямих і непрямих атак ін’єкції підказок через кілька рівнів безпеки:

##### **Основні механізми захисту:**

1. **Просунуте виявлення та фільтрація**
   - Алгоритми машинного навчання та методи NLP виявляють шкідливі інструкції у зовнішньому контенті
   - Аналіз у реальному часі документів, веб-сторінок, листів і джерел даних на наявність вбудованих загроз
   - Контекстне розуміння легітимних і шкідливих патернів підказок

2. **Техніки виділення (Spotlighting)**  
   - Відокремлює довірені системні інструкції від потенційно скомпрометованих зовнішніх вхідних даних
   - Методи трансформації тексту, що підвищують релевантність моделі, із ізоляцією шкідливого контенту
   - Допомагає AI-системам підтримувати правильну ієрархію інструкцій і ігнорувати вбудовані команди

3. **Системи розмежування та маркування даних**
   - Явне визначення меж між довіреними системними повідомленнями та зовнішнім текстом
   - Спеціальні маркери, що виділяють межі між довіреними та недовіреними джерелами даних
   - Чітке розділення запобігає плутанині інструкцій і несанкціонованому виконанню команд

4. **Постійна розвідка загроз**
   - Microsoft постійно відстежує нові патерни атак і оновлює захист
   - Проактивний пошук загроз нових технік ін’єкції та векторів атак
   - Регулярні оновлення моделей безпеки для підтримки ефективності проти еволюційних загроз

5. **Інтеграція Azure Content Safety**
   - Частина комплексного набору Azure AI Content Safety
   - Додаткове виявлення спроб jailbreak, шкідливого контенту та порушень політик безпеки
   - Уніфіковані контролі безпеки для компонентів AI-додатків

**Ресурси для впровадження**: [Документація Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)

![Microsoft Prompt Shields Protection](../../../translated_images/uk/prompt-shield.ff5b95be76e9c78c6ec0888206a4a6a0a5ab4bb787832a9eceef7a62fe0138d1.png)


## Просунуті загрози безпеці MCP

### Уразливості викрадення сесій

**Викрадення сесій** є критичним вектором атаки в станкових реалізаціях MCP, де несанкціоновані сторони отримують і зловживають легітимними ідентифікаторами сесій для видачі себе за клієнтів і виконання несанкціонованих дій.

#### **Сценарії атак і ризики**

- **Ін’єкція підказок через викрадення сесії**: Зловмисники зі вкраденими ідентифікаторами сесій впроваджують шкідливі події на серверах, що спільно використовують стан сесії, потенційно викликаючи шкідливі дії або отримуючи доступ до конфіденційних даних
- **Пряме видавання себе за користувача**: Вкрадені ідентифікатори сесій дозволяють безпосередньо викликати сервер MCP, обходячи автентифікацію і видаючи зловмисника за легітимного користувача
- **Компрометація відновлюваних потоків**: Зловмисники можуть передчасно завершувати запити, змушуючи легітимних клієнтів відновлювати сесії з потенційно шкідливим контентом

#### **Контролі безпеки для управління сесіями**

**Критичні вимоги:**
- **Перевірка авторизації**: Сервери MCP, що реалізують авторизацію, **ПОВИННІ** перевіряти ВСІ вхідні запити і **НЕ ПОВИННІ** покладатися на сесії для автентифікації  
- **Безпечне генерування сесій**: Використовуйте криптографічно безпечні, недетерміновані ідентифікатори сесій, згенеровані за допомогою безпечних генераторів випадкових чисел  
- **Прив’язка до користувача**: Прив’язуйте ідентифікатори сесій до інформації, специфічної для користувача, використовуючи формати на кшталт `<user_id>:<session_id>`, щоб запобігти зловживанню сесіями між користувачами  
- **Управління життєвим циклом сесії**: Реалізуйте належне завершення, ротацію та анулювання сесій для обмеження вікна вразливості  
- **Безпека транспорту**: Обов’язкове використання HTTPS для всієї комунікації, щоб запобігти перехопленню ідентифікаторів сесій  

### Проблема збентеженого довіреного посередника

**Проблема збентеженого довіреного посередника** виникає, коли сервери MCP виступають як проксі автентифікації між клієнтами та сторонніми сервісами, створюючи можливості для обходу авторизації через експлуатацію статичних ідентифікаторів клієнтів.

#### **Механізми атаки та ризики**

- **Обхід згоди на основі cookie**: Попередня автентифікація користувача створює cookie згоди, які зловмисники використовують через шкідливі запити авторизації з підробленими URI перенаправлення  
- **Крадіжка коду авторизації**: Існуючі cookie згоди можуть призводити до того, що сервери авторизації пропускають екрани згоди, перенаправляючи коди на контрольовані зловмисником кінцеві точки  
- **Несанкціонований доступ до API**: Викрадені коди авторизації дозволяють обмінювати їх на токени та імітувати користувача без явного схвалення  

#### **Стратегії пом’якшення**

**Обов’язкові заходи:**
- **Вимоги до явної згоди**: Проксі-сервери MCP, що використовують статичні ідентифікатори клієнтів, **ПОВИННІ** отримувати згоду користувача для кожного динамічно зареєстрованого клієнта  
- **Реалізація безпеки OAuth 2.1**: Дотримуйтесь сучасних найкращих практик безпеки OAuth, включно з PKCE (Proof Key for Code Exchange) для всіх запитів авторизації  
- **Сувора валідація клієнтів**: Реалізуйте ретельну перевірку URI перенаправлення та ідентифікаторів клієнтів, щоб запобігти експлуатації  

### Вразливості при передачі токенів  

**Передача токенів** — це явний антипатерн, коли сервери MCP приймають токени клієнтів без належної перевірки і пересилають їх до нижчестоячих API, порушуючи специфікації авторизації MCP.

#### **Наслідки для безпеки**

- **Обхід контролю**: Пряме використання токенів клієнтом для API обходить критичні обмеження швидкості, валідацію та моніторинг  
- **Пошкодження аудиту**: Токени, видані на верхньому рівні, унеможливлюють ідентифікацію клієнта, порушуючи можливості розслідування інцидентів  
- **Експлуатація проксі для витоку даних**: Невалідавані токени дозволяють зловмисникам використовувати сервери як проксі для несанкціонованого доступу до даних  
- **Порушення меж довіри**: Припущення про довіру нижчестоячих сервісів можуть бути порушені, якщо неможливо перевірити походження токенів  
- **Розширення атак на кілька сервісів**: Скомпрометовані токени, прийняті в кількох сервісах, дозволяють рухатися латерально  

#### **Необхідні заходи безпеки**

**Обов’язкові вимоги:**
- **Валідація токенів**: Сервери MCP **НЕ ПОВИННІ** приймати токени, які явно не видані для сервера MCP  
- **Перевірка аудиторії**: Завжди перевіряйте, що претензії аудиторії токена відповідають ідентичності сервера MCP  
- **Правильний життєвий цикл токенів**: Реалізуйте короткочасні токени доступу з безпечною практикою ротації  

## Безпека ланцюга постачання для AI-систем

Безпека ланцюга постачання вийшла за межі традиційних залежностей програмного забезпечення і охоплює всю екосистему AI. Сучасні реалізації MCP повинні ретельно перевіряти та моніторити всі компоненти, пов’язані з AI, оскільки кожен з них може містити потенційні вразливості, що загрожують цілісності системи.

### Розширені компоненти ланцюга постачання AI

**Традиційні залежності ПЗ:**
- Бібліотеки та фреймворки з відкритим кодом  
- Образи контейнерів та базові системи  
- Інструменти розробки та конвеєри збірки  
- Компоненти інфраструктури та сервіси  

**Специфічні елементи ланцюга постачання AI:**
- **Фундаментальні моделі**: Попередньо навчені моделі від різних постачальників, що потребують перевірки походження  
- **Сервіси векторизації**: Зовнішні сервіси векторизації та семантичного пошуку  
- **Постачальники контексту**: Джерела даних, бази знань та сховища документів  
- **Сторонні API**: Зовнішні AI-сервіси, ML-конвеєри та кінцеві точки обробки даних  
- **Артефакти моделей**: Ваги, конфігурації та варіанти тонкого налаштування моделей  
- **Джерела навчальних даних**: Набори даних для навчання та тонкого налаштування моделей  

### Комплексна стратегія безпеки ланцюга постачання

#### **Перевірка компонентів та довіра**
- **Перевірка походження**: Перевіряйте походження, ліцензування та цілісність усіх AI-компонентів перед інтеграцією  
- **Оцінка безпеки**: Проводьте сканування вразливостей та огляди безпеки моделей, джерел даних і AI-сервісів  
- **Аналіз репутації**: Оцінюйте безпекову репутацію та практики постачальників AI-сервісів  
- **Перевірка відповідності**: Забезпечуйте відповідність усіх компонентів організаційним вимогам безпеки та регуляторним нормам  

#### **Безпечні конвеєри розгортання**  
- **Автоматизоване сканування безпеки CI/CD**: Інтегруйте сканування безпеки у всі етапи автоматизованих конвеєрів розгортання  
- **Цілісність артефактів**: Реалізуйте криптографічну перевірку всіх розгорнутих артефактів (код, моделі, конфігурації)  
- **Покрокове розгортання**: Використовуйте поступові стратегії розгортання з перевіркою безпеки на кожному етапі  
- **Довірені сховища артефактів**: Розгортайте лише з перевірених, безпечних реєстрів та сховищ артефактів  

#### **Безперервний моніторинг та реагування**
- **Сканування залежностей**: Постійний моніторинг вразливостей для всіх залежностей ПЗ та AI-компонентів  
- **Моніторинг моделей**: Безперервна оцінка поведінки моделей, дрейфу продуктивності та аномалій безпеки  
- **Відстеження стану сервісів**: Моніторинг зовнішніх AI-сервісів на доступність, інциденти безпеки та зміни політик  
- **Інтеграція розвідки про загрози**: Включення стрічок загроз, специфічних для безпеки AI та ML  

#### **Контроль доступу та мінімальні привілеї**
- **Дозволи на рівні компонентів**: Обмежуйте доступ до моделей, даних і сервісів відповідно до бізнес-потреб  
- **Управління обліковими записами сервісів**: Використовуйте виділені облікові записи з мінімально необхідними правами  
- **Сегментація мережі**: Ізолюйте AI-компоненти та обмежуйте мережевий доступ між сервісами  
- **Контроль API-шлюзів**: Використовуйте централізовані API-шлюзи для контролю та моніторингу доступу до зовнішніх AI-сервісів  

#### **Реагування на інциденти та відновлення**
- **Процедури швидкого реагування**: Встановлені процеси для патчування або заміни скомпрометованих AI-компонентів  
- **Ротація облікових даних**: Автоматизовані системи для ротації секретів, API-ключів та облікових даних сервісів  
- **Можливість відкату**: Здатність швидко повертатися до попередніх відомо безпечних версій AI-компонентів  
- **Відновлення після порушень ланцюга постачання**: Специфічні процедури реагування на компрометацію верхньорівневих AI-сервісів  

### Інструменти безпеки Microsoft та інтеграція

**GitHub Advanced Security** забезпечує комплексний захист ланцюга постачання, включно з:  
- **Сканування секретів**: Автоматичне виявлення облікових даних, API-ключів та токенів у репозиторіях  
- **Сканування залежностей**: Оцінка вразливостей для відкритих залежностей та бібліотек  
- **Аналіз CodeQL**: Статичний аналіз коду на вразливості та проблеми кодування  
- **Інсайти ланцюга постачання**: Видимість стану здоров’я та безпеки залежностей  

**Інтеграція з Azure DevOps та Azure Repos:**  
- Безшовна інтеграція сканування безпеки у платформи розробки Microsoft  
- Автоматизовані перевірки безпеки в Azure Pipelines для AI-навантажень  
- Застосування політик для безпечного розгортання AI-компонентів  

**Внутрішні практики Microsoft:**  
Microsoft впроваджує широкі практики безпеки ланцюга постачання у всіх продуктах. Дізнайтеся про перевірені підходи в [The Journey to Secure the Software Supply Chain at Microsoft](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/).  

## Найкращі практики безпеки основи

Реалізації MCP успадковують і розвивають існуючий рівень безпеки вашої організації. Посилення базових практик безпеки суттєво підвищує загальний рівень захисту AI-систем і розгортань MCP.

### Основи безпеки

#### **Безпечні практики розробки**
- **Відповідність OWASP**: Захист від [OWASP Top 10](https://owasp.org/www-project-top-ten/) вразливостей веб-додатків  
- **Захисти, специфічні для AI**: Впровадження контролів для [OWASP Top 10 для LLM](https://genai.owasp.org/download/43299/?tmstv=1731900559)  
- **Безпечне управління секретами**: Використання спеціалізованих сховищ для токенів, API-ключів та конфіденційних даних конфігурації  
- **Кінцева шифрація**: Забезпечення безпечної комунікації між усіма компонентами додатків і потоками даних  
- **Валідація введення**: Ретельна перевірка всіх користувацьких введень, параметрів API та джерел даних  

#### **Зміцнення інфраструктури**
- **Багатофакторна автентифікація**: Обов’язкове MFA для всіх адміністративних та сервісних облікових записів  
- **Управління патчами**: Автоматизоване та своєчасне оновлення ОС, фреймворків та залежностей  
- **Інтеграція провайдерів ідентичності**: Централізоване управління ідентичністю через корпоративні провайдери (Microsoft Entra ID, Active Directory)  
- **Сегментація мережі**: Логічна ізоляція компонентів MCP для обмеження потенціалу латерального руху  
- **Принцип найменших привілеїв**: Мінімально необхідні права для всіх системних компонентів і облікових записів  

#### **Моніторинг безпеки та виявлення**
- **Комплексне логування**: Детальне логування активностей AI-додатків, включно з взаємодією клієнт-сервер MCP  
- **Інтеграція SIEM**: Централізоване управління інформацією про безпеку та подіями для виявлення аномалій  
- **Аналітика поведінки**: AI-аналіз для виявлення незвичних патернів у поведінці системи та користувачів  
- **Розвідка про загрози**: Інтеграція зовнішніх стрічок загроз та індикаторів компрометації (IOC)  
- **Реагування на інциденти**: Чітко визначені процедури виявлення, реагування та відновлення після інцидентів безпеки  

#### **Архітектура нульової довіри**
- **Ніколи не довіряй, завжди перевіряй**: Безперервна перевірка користувачів, пристроїв та мережевих з’єднань  
- **Мікросегментація**: Гранулярний мережевий контроль, що ізолює окремі робочі навантаження та сервіси  
- **Безпека, орієнтована на ідентичність**: Політики безпеки, засновані на перевірених ідентичностях, а не на мережевому розташуванні  
- **Безперервна оцінка ризиків**: Динамічна оцінка безпекового стану на основі поточного контексту та поведінки  
- **Умовний доступ**: Контроль доступу, що адаптується залежно від факторів ризику, місцезнаходження та довіри до пристрою  

### Патерни інтеграції підприємства

#### **Інтеграція в екосистему безпеки Microsoft**
- **Microsoft Defender for Cloud**: Комплексне управління безпекою хмарної інфраструктури  
- **Azure Sentinel**: Хмарний SIEM та SOAR для захисту AI-навантажень  
- **Microsoft Entra ID**: Корпоративне управління ідентичністю та доступом з політиками умовного доступу  
- **Azure Key Vault**: Централізоване управління секретами з підтримкою апаратних модулів безпеки (HSM)  
- **Microsoft Purview**: Управління даними та відповідність для джерел даних AI та робочих процесів  

#### **Відповідність та управління**
- **Відповідність регуляторним вимогам**: Забезпечення відповідності реалізацій MCP галузевим стандартам (GDPR, HIPAA, SOC 2)  
- **Класифікація даних**: Правильна категоризація та обробка конфіденційних даних, що обробляються AI-системами  
- **Аудиторські сліди**: Комплексне логування для відповідності регуляторним вимогам та судово-технічного розслідування  
- **Контроль конфіденційності**: Впровадження принципів privacy-by-design в архітектуру AI-систем  
- **Управління змінами**: Формалізовані процеси для безпекових оглядів змін у AI-системах  

Ці базові практики створюють міцну основу безпеки, що підвищує ефективність специфічних заходів безпеки MCP і забезпечує комплексний захист AI-додатків.

## Ключові висновки щодо безпеки

- **Багаторівневий підхід до безпеки**: Поєднуйте базові практики безпеки (безпечне кодування, найменші привілеї, перевірка ланцюга постачання, безперервний моніторинг) з AI-специфічними контролями для комплексного захисту  

- **Специфічні загрози AI**: Системи MCP стикаються з унікальними ризиками, включно з ін’єкцією підказок, отруєнням інструментів, викраденням сесій, проблемою збентеженого довіреного посередника, вразливостями передачі токенів та надмірними правами, що потребують спеціалізованих заходів  

- **Відмінна автентифікація та авторизація**: Впроваджуйте надійну автентифікацію через зовнішніх провайдерів ідентичності (Microsoft Entra ID), забезпечуйте належну валідацію токенів і ніколи не приймайте токени, не видані явно для вашого сервера MCP  

- **Запобігання атакам на AI**: Використовуйте Microsoft Prompt Shields та Azure Content Safety для захисту від непрямих атак ін’єкції підказок і отруєння інструментів, одночасно перевіряючи метадані інструментів і моніторячи динамічні зміни  

- **Безпека сесій та транспорту**: Використовуйте криптографічно безпечні, недетерміновані ідентифікатори сесій, прив’язані до ідентичностей користувачів, впроваджуйте належне управління життєвим циклом сесій і ніколи не використовуйте сесії для автентифікації  

- **Найкращі практики безпеки OAuth**: Запобігайте атакам збентеженого довіреного посередника через явну згоду користувача для динамічно зареєстрованих клієнтів, правильну реалізацію OAuth 2.1 з PKCE та сувору валідацію URI перенаправлення  

- **Принципи безпеки токенів**: Уникайте антипатернів передачі токенів, перевіряйте претензії аудиторії токенів, впроваджуйте короткочасні токени з безпечною ротацією та підтримуйте чіткі межі довіри  

- **Комплексна безпека ланцюга постачання**: Ставтеся до всіх компонентів екосистеми AI (моделі, вбудовування, постачальники контексту, зовнішні API) з такою ж суворістю безпеки, як і до традиційних залежностей ПЗ  

- **Безперервна еволюція**: Слідкуйте за швидко змінними специфікаціями MCP, долучайтеся до стандартів спільноти безпеки та підтримуйте адаптивний рівень безпеки в міру розвитку протоколу  

- **Інтеграція безпеки Microsoft**: Використовуйте комплексну екосистему безпеки Microsoft (Prompt Shields, Azure Content Safety, GitHub Advanced Security, Entra ID) для посиленого захисту розгортань MCP  

## Комплексні ресурси

### **Офіційна документація з безпеки MCP**
- [Специфікація MCP (Актуальна: 2025-11-25)](https://spec.modelcontextprotocol.io/specification/2025-11-25/)
- [Найкращі практики безпеки MCP](https://modelcontextprotocol.io/specification/2025-11-25/basic/security_best_practices)
- [Специфікація авторизації MCP](https://modelcontextprotocol.io/specification/2025-11-25/basic/authorization)
- [Репозиторій MCP на GitHub](https://github.com/modelcontextprotocol)

### **Стандарти безпеки та найкращі практики**
- [Найкращі практики безпеки OAuth 2.0 (RFC 9700)](https://datatracker.ietf.org/doc/html/rfc9700)
- [OWASP Top 10 для веб-додатків](https://owasp.org/www-project-top-ten/)
- [OWASP Top 10 для великих мовних моделей](https://genai.owasp.org/download/43299/?tmstv=1731900559)
- [Звіт Microsoft Digital Defense](https://aka.ms/mddr)

### **Дослідження та аналіз безпеки AI**
- [Ін’єкція підказок у MCP (Simon Willison)](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)
- [Атаки отруєння інструментів (Invariant Labs)](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)
- [Огляд досліджень безпеки MCP (Wiz Security)](https://www.wiz.io/blog/mcp-security-research-briefing#remote-servers-22)

### **Рішення безпеки Microsoft**
- [Документація Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)
- [Служба Azure Content Safety](https://learn.microsoft.com/azure/ai-services/content-safety/)
- [Безпека Microsoft Entra ID](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)
- [Кращі практики управління токенами Azure](https://learn.microsoft.com/entra/identity-platform/access-tokens)
- [Розширена безпека GitHub](https://github.com/security/advanced-security)

### **Посібники з впровадження та навчальні матеріали**
- [Azure API Management як шлюз автентифікації MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
- [Аутентифікація Microsoft Entra ID з серверами MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)
- [Безпечне зберігання та шифрування токенів (відео)](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)

### **Безпека DevOps та ланцюга постачання**
- [Безпека Azure DevOps](https://azure.microsoft.com/products/devops)
- [Безпека Azure Repos](https://azure.microsoft.com/products/devops/repos/)
- [Подорож Microsoft до безпеки ланцюга постачання програмного забезпечення](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/)

## **Додаткова документація з безпеки**

Для всебічних рекомендацій з безпеки зверніться до цих спеціалізованих документів у цьому розділі:

- **[Кращі практики безпеки MCP 2025](./mcp-security-best-practices-2025.md)** - Повний набір кращих практик безпеки для впроваджень MCP
- **[Впровадження Azure Content Safety](./azure-content-safety-implementation.md)** - Практичні приклади впровадження інтеграції Azure Content Safety  
- **[Контролі безпеки MCP 2025](./mcp-security-controls-2025.md)** - Останні контролі безпеки та методики для розгортання MCP
- **[Швидкий довідник кращих практик MCP](./mcp-best-practices.md)** - Швидкий довідник основних практик безпеки MCP

---

## Що далі

Далі: [Розділ 3: Початок роботи](../03-GettingStarted/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Відмова від відповідальності**:  
Цей документ було перекладено за допомогою сервісу автоматичного перекладу [Co-op Translator](https://github.com/Azure/co-op-translator). Хоча ми прагнемо до точності, будь ласка, майте на увазі, що автоматичні переклади можуть містити помилки або неточності. Оригінальний документ рідною мовою слід вважати авторитетним джерелом. Для критично важливої інформації рекомендується звертатися до професійного людського перекладу. Ми не несемо відповідальності за будь-які непорозуміння або неправильні тлумачення, що виникли внаслідок використання цього перекладу.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->